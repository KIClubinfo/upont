<div up-row padded right>
    <div class="up-likes up-clickable" ng-click="upvote(url);" ng-class="{active : objet.like, admissibles : $root.isAdmissible || $root.isExterieur}">
        <i class="fa fa-thumbs-o-up"></i> {{ objet.likes >= 0 ? objet.likes : 0 }}
    </div>

    <div ng-if="!$root.isExterieur" class="up-likes up-clickable" ng-click="downvote(url);" ng-class="{active : objet.dislike, admissibles : $root.isAdmissible || $root.isExterieur}">
        <i class="fa fa-thumbs-o-down"></i> {{ objet.dislikes >= 0 ? objet.dislikes : 0 }}
    </div>

    <div class="up-likes" ng-class="{admissibles : $root.isAdmissible}">
        <i class="fa fa-comment"></i> {{ objet.comments }}
    </div>
</div>

<hr ng-if="!$root.isAdmissible || comments.length > 0">

<div>
    <div ng-if="shownComments < 0 && comments.length > 3">
        <h3 class="up-likes up-clickable" ng-click="openComments()" ng-class="{active : shownComments > 0 }" >Afficher {{ comments.length+shownComments }} {{ comments.length+shownComments == 1 ? 'commentaire précédent' : 'commentaires précédents' }}</h3>
    </div>
    <div class="up-comment" ng-repeat="comment in comments | orderBy: date | limitTo: shownComments" up-row left space-between
         ng-mouseover="showModify=true" ng-mouseleave="showModify=false">
        <div up-col-xs="8%" up-col-sm="8%" up-col-md="8%" up-col="5%">
            <div class="up-image-container">
                <div class="up-image up-profile-picture" ng-style="{'background-image' : 'url({{comment.author.image_url | thumb | urlFile}})'}"></div>
            </div>
        </div>

        <div up-col-xs="82%" up-col-sm="82%" up-col-md="82%" up-col="85%">
            <strong ng-if="!$root.isExterieur"><span up-user user="comment.author">{{ comment.author.nick }}</span> : </strong>
            <strong ng-if="$root.isExterieur">{{ comment.author.first_name }} {{ comment.author.last_name }} : </strong>

            <span ng-bind-html="comment.text"></span><br>
            {{ comment.date | fromNow }}&nbsp;
            <span class="up-likes up-clickable" ng-click="likeComment(comment)"  ng-class="{active : comment.like, admissibles : $root.isAdmissible || $root.isExterieur}">
                <i class="fa fa-thumbs-o-up"></i> {{ comment.likes >= 0 ? comment.likes : 0 }}
            </span>
            &nbsp;
            <span ng-if="!$root.isExterieur" class="up-likes up-clickable" ng-click="dislikeComment(comment)" ng-class="{active : comment.dislike, admissibles : $root.isAdmissible || $root.isExterieur}">
                <i class="fa fa-thumbs-o-down"></i> {{ comment.dislikes >= 0 ? comment.dislikes : 0 }}
            </span>
        </div>
        <div up-col="6%" class="centering">
            <i ng-show="comment.author.username == $root.me.username && showModify"
               class="fa fa-pencil up-clickable" ng-click="modifyComment(comment)"
               title="Modifier le commentaire"></i><br>
            <i ng-show="comment.author.username == $root.me.username && showModify"
               class="fa fa-trash up-clickable up-delete-button"  ng-click="deleteComment(comment)"
               title="Supprimer le commentaire"></i>
        </div>
    </div>
    <form up-row space-between autocomplete="off" ng-if="!$root.isAdmissible">
        <div up-col-xs="8%" up-col-sm="8%" up-col-md="8%" up-col="5%">
            <div class="up-image-container">
                <div class="up-image up-profile-picture" ng-style="{'background-image' : 'url({{$root.me.image_url | thumb | urlFile}})'}"></div>
            </div>
        </div>
        <div up-col-xs="90%" up-col-sm="90%" up-col-md="90%" up-col="93%">
            <textarea class="up-col-xs-12 comment-textarea" ng-model="commentText"
                      placeholder="Ajouter un commentaire" msd-elastic
                      ng-keydown="submitComment($event, commentText) ? commentText = '' : null"></textarea>
        </div>
    </form>
</div>
